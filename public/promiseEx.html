<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <script>

    // 콜백지옥
    // const fnOnload = () => {
    //   printLater(1, function() {
    //     printLater(2, function() {
    //       printLater(3, function() {
    //         printLater(4)
    //       })
    //     })
    //   });
    // }
    //
    // const printLater = (number, fn) => {
    //   setTimeout(
    //     function() {
    //       console.log(number);
    //       if(fn) fn();
    //     },
    //     1000
    //   )
    // }

    // const fnOnload = () => {
    //   printLater(1)
    //   .then(() => printLater(2))
    //   .then(() => printLater(3))
    //   .then(() => printLater(4))
    // }

    // const printLater = (number) => {
    //   return new Promise(
    //     resolve => {
    //       setTimeout(
    //         () => {
    //           console.log(number);
    //           resolve();
    //         },
    //         1000
    //       )
    //     }
    //   )
    // }

    const fnOnload = () => {
      printLater(1)
      .then((num) => printLater(num))
      .then((num) => printLater(num))
      .then((num) => printLater(num))
      .then((num) => printLater(num))
      .catch(e => console.log(e));
    }

    const printLater = (number) => {
      return new Promise (
        (resolve, reject) => {
          if(number > 4) {
            return reject('number is greater then 4');
          } //reject 오류발생
          setTimeout(
            () => {
              console.log(number);
              resolve(number + 1);
            },
            1000
          );
        }
      );
    }

  </script>
 </head>
 <body onLoad="fnOnload()">
   <h1>Promise Ex</h1>
 </body>
</html>
